<div class="aspirante-wrapper">
  <section class="aspirante-card">
    <header class="card-header">
      <h1 class="title">REGISTRO ASPIRANTE</h1>
      <p class="subtitle">quiero llorar</p>
    </header>

    <form [formGroup]="aspiranteForm" (ngSubmit)="handleSubmit()" class="aspirante-form" novalidate>
      <div class="form-grid">

        <div class="form-field">
          <label for="cicloLectivo" class="label">Ciclo Lectivo</label>
          <input type="text" id="cicloLectivo" formControlName="cicloLectivo" class="input" />
        </div>

        <div class="form-field">
          <label for="nombre" class="label">Nombre</label>
          <input type="text" id="nombre" formControlName="nombre" class="input" />
          <p class="form-error" *ngIf="aspiranteForm.get('nombre')?.invalid && aspiranteForm.get('nombre')?.touched">
            Campo Requerido
          </p>
        </div>

        <div class="form-field">
          <label for="cedula" class="label">Cédula</label>
          <input type="text" id="cedula" formControlName="cedula" class="input" />
          <p class="form-error" *ngIf="aspiranteForm.get('cedula')?.invalid && aspiranteForm.get('cedula')?.touched">
            Campo Requerido
          </p>
        </div>

        <div class="form-field">
          <label for="correo" class="label">Correo</label>
          <input type="email" id="correo" formControlName="correo" class="input" />
          <p class="form-error" *ngIf="aspiranteForm.get('correo')?.invalid && aspiranteForm.get('correo')?.touched">
            Campo Requerido
          </p>
        </div>

        <div class="form-field">
          <label for="rol" class="label">Rol</label>
          <input type="text" id="rol" formControlName="rol" class="input" />
          <p class="form-error" *ngIf="aspiranteForm.get('rol')?.invalid && aspiranteForm.get('rol')?.touched">
            Campo Requerido
          </p>
        </div>

        <div class="form-field">
          <label for="programa" class="label">Programa</label>
          <input type="text" id="programa" formControlName="programa" class="input" />
          <p class="form-error" *ngIf="aspiranteForm.get('programa')?.invalid && aspiranteForm.get('programa')?.touched">
            Campo Requerido
          </p>
        </div>

      </div>

      <div class="form-actions">
        <!-- Botón para mostrar inscritos -->
        <button type="button" class="btn-primary" (click)="toggleInscritos()">
          Inscritos
        </button>

        <!-- Botón cancelar (solo en edición) -->
        <button *ngIf="editingIndex !== null" type="button" class="btn-secondary" (click)="cancelEdit()">
          Cancelar
        </button>

        <!-- Botón submit con texto dinámico -->
        <button type="submit" class="btn-primary" [disabled]="aspiranteForm.invalid">
          {{ editingIndex !== null ? 'Actualizar Usuario' : 'Crear Usuario' }}
        </button>
      </div>
    </form>

    <!-- Panel de inscritos -->
    <section *ngIf="showInscritos" class="inscritos-panel">
      <h3>Lista de Inscritos</h3>

      <div *ngIf="inscritos.length === 0" class="inscritos-empty">
        No hay inscritos aún.
      </div>

      <table *ngIf="inscritos.length > 0" class="inscritos-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Nombre</th>
            <th>Cédula</th>
            <th>Correo</th>
            <th>Rol</th>
            <th>Programa</th>
            <th>Ciclo</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of inscritos; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ item.nombre }}</td>
            <td>{{ item.cedula }}</td>
            <td>{{ item.correo }}</td>
            <td>{{ item.rol }}</td>
            <td>{{ item.programa }}</td>
            <td>{{ item.cicloLectivo }}</td>
            <td>
              <div class="row-actions">
                <button type="button" class="btn-secondary" (click)="editInscrito(i)">Editar</button>
                <button type="button" class="btn-danger" (click)="deleteInscrito(i)">Eliminar</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </section>
</div>